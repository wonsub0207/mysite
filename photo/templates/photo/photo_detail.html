{% extends 'base.html' %}

{% block head_extra %}
<style>
    .photo-wrap { max-width:900px; margin:0 auto }
    .card { background:white; border-radius:12px; padding:20px; box-shadow:0 10px 30px rgba(2,6,23,0.06) }
    .title { font-size:1.8rem; font-weight:800 }
    .meta { color:#6b7280; margin-top:8px }
    .img-full { width:100%; max-height:600px; object-fit:contain; border-radius:8px; margin-top:16px }
    .desc { margin-top:14px; line-height:1.75; color:#374151 }
    .actions { display:flex; gap:8px; margin-top:16px }
    .btn { display:inline-block; text-decoration:none; font-weight:700; padding:8px 12px; border-radius:8px; border:none; cursor:pointer }
    .btn-back { color:#374151; background:rgba(2,6,23,0.03) }
    .btn-delete { background:linear-gradient(90deg,#f5576c 0%,#f093fb 100%); color:white }
    @media(max-width:640px){ .img-full{ max-height:320px } }
    .comment-section{ margin-top:22px; padding-top:16px; border-top:1px solid #e5e7eb }
    .comment-title{ font-weight:800; margin-bottom:10px; }
    .comment-item{ padding:10px 12px; background:rgba(2,6,23,0.02); border-radius:8px; margin-bottom:10px; }
    .comment-meta{ color:#6b7280; font-size:0.9rem; margin-bottom:4px; }
    .comment-text{ color:#111827; white-space:pre-line; }
    .comment-form .form-control{ width:100%; margin-bottom:10px; border-radius:8px; border:1px solid #e5e7eb; padding:10px 12px; }
    .comment-form button{ background:linear-gradient(90deg,#667eea 0%,#764ba2 100%); color:white; border:none; padding:10px 14px; border-radius:10px; font-weight:700; cursor:pointer; width:100%; }
</style>
{% endblock %}

{% block content %}
<div class="photo-wrap">
    <div class="card">
        <div class="title">{{ object.title }}</div>
        <div class="meta">작성자: {{ object.author }} &nbsp;|&nbsp; 작성일: {{ object.created }}</div>

        {% if object.image %}
            <img src="{{ object.image.url }}" alt="{{ object.title }}" class="img-full">
        {% endif %}

        {% if object.description %}
            <div class="desc">{{ object.description }}</div>
        {% endif %}

        <div class="comment-section">
            <div class="comment-title">댓글</div>
            {% if comments %}
                {% for comment in comments %}
                    <div class="comment-item">
                        <div class="comment-meta">{{ comment.name }} · {{ comment.created }}</div>
                        <div class="comment-text">{{ comment.text }}</div>
                    </div>
                {% endfor %}
            {% else %}
                <div class="comment-item" style="background:transparent;color:#6b7280;">아직 댓글이 없습니다.</div>
            {% endif %}

            <form method="post" class="comment-form" style="margin-top:12px;">
                {% csrf_token %}
                {{ comment_form.name }}
                {{ comment_form.text }}
                <button type="submit">댓글 남기기</button>
            </form>
        </div>

        <div class="actions">
            <a href="{% url 'photo_list' %}" class="btn btn-back">← 목록으로</a>
            <a href="{% url 'photo_delete' object.pk %}" class="btn btn-delete">삭제</a>
        </div>
    </div>
</div>

{% endblock %}
